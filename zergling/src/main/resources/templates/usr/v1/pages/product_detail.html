<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="/usr/v1/assets/css/bootstrap.min.css" />
    <link rel="shortcut icon" href="/usr/v1/assets/images/favicon.svg"> -->
    <link rel="icon" type="image/png" sizes="256x256" href="/usr/v1/assets/images/favicon/favicon_256x256.png">

    <link rel="stylesheet" href="/usr/v1/assets/css/reset.css">
    
    <!-- <link rel="stylesheet" href="/usr/v1/assets/css/style.css"> -->
    <link rel="stylesheet" href="/usr/v1/assets/css/tiny-slider.css">
    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <!-- another-->
    <!-- kartik-v star rating -->
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/css/star-rating.min.css" rel="stylesheet">
    
    <!-- slick -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>

    <!-- swiper -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="/usr/v1/assets/css/style.css">
    <link rel="stylesheet" href="/usr/v1/assets/css/product_detail.css">
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <style>
        
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div th:replace="~{usr/v1/infra/include/head :: header}"></div>
        <main>
            <div class="content_wrapper">
                <div class="prod_detail_head">
                    <div class="prod_detail_head_top">
                        <div class="prod_type">
                            <p><span th:text="${product.prodTypeName}"></span></p>
                        </div>
                        <div class="prod_title">
                            <p><span class="gray_color pre_order"></span> <strong th:text="${product.title}">나쁜 검사들</strong></p>
                        </div>
                        <div class="prod_desc">
                            <span th:if="${#lists.size(prodAuthor) == 1}" th:text="${product.name +' '+ product.prodTypeName}">이중세 장편소설</span>
                            <!-- <span><span th:text="${product.author}">이중세</span> 장편소설</span> -->
                        </div>
                    </div>
                    <div class="prod_detail_head_bottom d-flex justify-content-between gap-5">
                        <div class="prod_detail_view d-flex flex-column gap-3">
                            <p>
                                <!-- <strong><span th:text="${product.author}">이중세</span> 저자(글)</strong> -->
                                <p><strong th:each="prodAuthor : ${prodAuthor}" th:text="${prodAuthor.name + (prodAuthorStat.index < prodAuthorStat.size - 1 ? ', ' : '')}"></strong> 저자(글)</p>
                                <p class="gray_color"><span th:text="${product.publisherName}">마이디어북스</span> · <span th:text="${#dates.format(product.makeDate, 'yyyy년 MM월 dd일')}"></span></p>
                            </p>
                            <div class="rating_box d-flex align-items-center">
                                <div class="user_rating rating_number_box d-flex flex-column gap-3">
                                    <p class="rating_number">
                                        <strong>9.1</strong>
                                    </p>
                                    <div class="total_clover_box">
                                        <ul class="clover_box d-flex justify-content-between gap-3">
                                            <li>
                                                <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                            </li>
                                            <li>
                                                <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                            </li>
                                            <li>
                                                <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                            </li>
                                            <li>
                                                <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                            </li>
                                        </ul>
                                    </div>
                                    <p class="total_reviews">(<span class="review_count" th:text="${rvCount}"></span>개의 리뷰)</p>
                                </div>
                                <div></div>
                                <div class="review_tags_area">
                                    <div class="most_tag_box user_tags" th:if="${(rvList == null||rvList == ''||rvCount == 0)}">
                                        <p>
                                            평가된 감성태그가<br>
                                            없습니다
                                        </p>
                                    </div>
                                    <div class="most_tag_box" th:if="${!(rvList == null||rvList == ''||rvCount == 0)}">
                                        <p>
                                            <span class="most_tag_parcent"></span>의 구매자가<br>
                                            <span class="most_tag"></span> 라고 응답했어요
                                        </p>
                                    </div>
                                </div>
                                
                                
                            </div>
                        </div>
                        <div class="img_slider_container">
                            <div class="img-box">
                                <img th:src="${'/usr/v1/assets/images/prod/300/'+ product.imgSrc+'.jpg'}" alt="">
                            </div>
                        </div>
                        <div class="prod_detail_info">
                            <div class="badges_box">
                                <span class="badge">무료배송</span>
                                <span class="badge">소득공제</span>
                            </div>
                            <div class="prod_price">
                                <strong class="saleP"><span th:text="${product.sale}">10</span>%</strong>
                                <span class="sale_price">
                                    <strong th:text="${#numbers.formatInteger(product.salePrice,1,'COMMA')}">15,750</strong>원
                                </span>
                                <span class="regular_price"><span th:text="${#numbers.formatInteger(product.price,1,'COMMA')}">17,500</span>원</span>
                            </div>
                            <!-- <div class="point_box d-flex justify-content-between">
                                <strong>적립/혜택</strong>
                                <span class="green_color"><span th:text="${#numbers.formatInteger(product.point,1,'COMMA')}">870</span>P</span>
                            </div> -->
                            <div class="delivery_info d-flex justify-content-between">
                                <div>
                                    <strong>배송안내</strong>
                                </div>
                                <div>
                                    <p>무료배송</p>
                                    <p><span th:text="${#dates.format(product.shipDate, 'M/d') + '(' + #dates.format(product.shipDate, 'E') + ')'}"></span> 출고예정</p>
                                    <p>기본배송지 기준</p>
                                </div>
                            </div>
                            <div class="prod_detail_info_etc">
                                <div class="number-input">
                                    <button class="decrease-button">-</button>
                                    <input id="uoQuantity" name="uoQuantity" type="number" min="1" max="999" value="1" >
                                    <button class="increase-button">+</button>
                                </div>
                                <div class="buy_btn_box">
                                    <!-- <button class="btn" th:onclick="|location.href='@{/product_buy(seq=${product.seq})}'|">구매하기</button> -->
                                    <button class="btn" th:data-seq="${product.seq}" onclick="buyProduct(this)">구매하기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="prod_detail_tabs d-flex gap-3">
                    <div class="detail_tabs prod_detail_info_tab">상품정보</div>
                    <div class="detail_tabs prod_detail_review_tab" >리뷰 (<span class="review_count" th:text="${rvCount}"></span>)</div>
                </div>
                <div class="prod_detail_contents d-flex">
                    <div class="prod_detail_info_wrap">
                        <div class="info_img">
                            <div class="img-box">
                                <img src="/usr/v1/assets/images/info/i9791193289273.jpg" alt="">
                            </div>
                        </div>
                        <div class="prod_about">
                            <div class="prod_about_head d-flex flex-column gap-2 mb-3">
                                <p class="box_title"><b>책 소개</b></p>
                                <p>이 책이 속한 분야</p>
                                <div>
                                    <p><span>국내도서</span> > <span th:text="${product.prodTypeName}"></span></p>
                                </div>
                            </div>
                            <div>
                                <p class="info_text" th:utext="${product.intro}">
                                    <strong>
                                        “나쁜 것과 나쁜 게 아닌 것의 구분은 우리 검찰이 한다.”<br><br>휘몰아치는 전개! 압도적 몰입감! K-스토리 수상작가 이중세 신작 장편소설<br>대한민국 최고 권력 검찰을 향한 칼끝은 범죄인가, 개혁인가?
                                    </strong>
                                    <br><br>
                                    K-스토리 최우수상 수상, 교보문고 스토리 공모전 수상, SF 오디오 스토리 어워즈 수상 등 화려한 수상 경력으로 수많은 독자들에게 눈도장을 찍은 이중세 작가가 신작 장편소설 『나쁜 검사들』을 출간했다. 한때는 세상을 뒤엎고 싶었던 반부패수사부 검사 출신의 변호사가 뜻밖의 범죄 사건에 휘말리게 되면서 결국 검찰을 향해 칼끝을 겨누게 되는 이 소설은, 대한민국 권력의 지도를 적나라하게 보여주는 웰메이드 누아르 수사 활극이다.<br>
                                    실제로 작가는 이 소설을 쓰기 위해 수년에 걸쳐 관계자들을 조사하고 인터뷰했으며 그 노력은 고스란히 작품에 녹아들었다. 부패한 조직과 반부패를 부르짖는 이들의 팽팽한 긴장감은 현실보다 더 현실 같은 에피소드로 마지막까지 이 책을 손에서 놓지 못하게 만든다. 작가는 “부당한 처사를 당연하게 받아들이지 않는 선한 자들의 작은 목소리가 결국 큰 세상을 바꿀 것”이라며, 이 책이 독자들의 답답한 가슴을 시원하게 뚫어줄 소화제가 되기를 바랐다.<br>
                                    휘몰아치는 전개와 생생한 묘사, 압도적 몰입감으로 마치 한 편의 영화를 보듯 단숨에 읽어내려갈 수 있는 소설 『나쁜 검사들』과 함께 무더운 여름을 시원하게 날려보자.
                                </p>
                                <div class="collapse_btn">
                                    <span>펼치기</span>
                                </div>
                            </div>
                        </div>
                        <div class="author_info_area">
                            <p class="box_title"><b>작가정보</b></p>
                            <!-- <div>
                                <div th:each="author : ${authors}">
                                    <p class="aa"  th:text="'작가이름: '+${author.name}"></p>
                                    <br>
                                    <p th:each="title: ${author.titleList}" th:text="${title}"></p>
                                </div>
                            </div> -->
                            <div class="author_info">
                                
                                <div class="author_info_box d-flex flex-column gap-3 "  th:each="author : ${authors}">
                                    <div class="d-flex justify-content-between">
                                        <p><span>저자(글) </span> <strong th:text="${author.name}"> 이중세</strong></p>
                                        <button class="btn">인물정보</button>
                                    </div>
                                    <div class="author_type">
                                        <button class="btn" th:text="${author.codeName}">연극인＞희곡/극작가</button>
                                    </div>                                
                                    <p class="info_text info_desc" th:text="${author.authorInfo}">생물학과 문예창작을 전공했다. 오래 기억되는 글을 쓰고 싶어 한다.<br>소설 「그래서 그들은 강으로 갔다」로 2013년 평사리문학대상을, 같은 해 희곡 〈끈〉으로 목포문학상 희곡 본상을 받았다.<br>소설 「코의 무게」, 「오래된 미래」가 각각 2019 교보문고 스토리공모전, SF오디오스토리어워즈에 수상작으로 선정되었다.<br>2022년 K-스토리 공모전에서 최우수상을 받고 장편소설 『강철로 된 무지개』를 출간했다.<br>그 밖에 희곡 〈파국〉과 장편소설 『삼키는 칼』을 썼다.</p>
                                    <div class="collapse_btn">
                                        <span>펼치기</span>
                                    </div>
                                    <div class="author_other_prod_area">
                                        <div class="author_other_prod"  th:each="entry: ${author.titleImageMap}">
                                            <!-- th:if="${#lists.size(author.titleImageMap) > 0}" -->
                                            <!-- <p th:text="${#lists.size(author.titleImageMap)}"></p> -->
                                            <div class="img-box">
                                                <img th:src="${'/usr/v1/assets/images/prod/200/'+entry.value+'.jpg'}" alt="">
                                            </div>
                                            <a href="javascript:void(0);" class="prod_title" ><strong th:text="${entry.key}">강철로 된 무지개</strong></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="book_contents">
                            <p class="box_title"><b>목차</b></p>
                            <p class="info_text" th:text="${product.tableOfContents}">

                            </p>
                            <!-- <ul class="info_text">
                                
                                <li>제1장. 붉은 옷을 입은 여인</li>
                                <li>제2장. 남색 아반떼에 몸을 숨긴 수사관</li>
                                <li>제3장. 갈색 보테가베네타 가방을 든 변호사</li>
                                <li>제4장. 검은 하이힐을 신은 검사</li>
                                <li>제5장. 황금 커프스단추를 단 칼잡이들</li>
                                <li>제6장. 은빛 라이터를 딸깍거리는 깡패</li>
                                <li>제7장. 보랏빛 행커치프를 착용한 보스</li>
                                <li>제8장. 흰색 가루 속에서 춤을 추는 사람들</li>
                                <li>제9장. 호두색 마호가니 책상에 앉은 얼간이들</li>
                                <li>제10장. 푸른 재킷을 입은 사나이</li>
                            </ul> -->
                            <div class="collapse_btn ">
                                <span>펼치기</span>
                            </div>
                        </div>
                        <div class="book_info">
                            <p class="box_title"><b>책 속으로</b></p>
                            <p class="info_text" th:text="${product.preview}"></p>
                            <div class="collapse_btn ">
                                <span>펼치기</span>
                            </div>
                        </div>
                        <div class="publishers_review">
                            <p class="box_title"><b>출판사 서평</b></p>
                            <p class="info_text" th:text="${product.publisherReview}"></p>
                            <div class="collapse_btn ">
                                <span>펼치기</span>
                            </div>
                        </div>
                        <div class="book_review" id="book_review">
                            <div class="box_title_area">
                                <p class="box_title"><b>Klover 리뷰 (<span class="review_count" th:text="${rvCount}"></span>)</b></p>
                            </div>
                            <div class="review_box">
                                <div class="d-flex justify-content-between">
                                    <div class="rating_number_box ">
                                        <p><strong>사용자총점</strong></p>
                                        <div class="rating_total d-flex gap-3 justify-content-center mt-3">
                                            <ul class="clover_box d-flex justify-content-between">
                                                <li class="active">
                                                    <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                </li>
                                                <li class="active">
                                                    <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                </li>
                                                <li class="active">
                                                    <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                </li>
                                                <li class="active">
                                                    <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                </li>
                                            </ul>
                                            <div class="rating_number_box">
                                                <span class="rating_number"><strong>9.1</strong></span> / 
                                                <span>10</span>
                                            </div>
                                        </div>
                                        <ul class="scroll_box">
                                                
                                        </ul>
                                        <!-- <ul class="scroll_box">
                                            <li>
                                                <ul class="clover_box d-flex justify-content-between gap-3">
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                </ul>
                                                <div class="score_bar progress">
                                                    <div class="progress-bar" role="progressbar" style="width: calc((100%/3)*2)" aria-valuenow="(100/3)*2" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <div class="ratingP"><p><span>66</span>%</p></div>
                                            </li>
                                            <li>
                                                <ul class="clover_box d-flex justify-content-between gap-3">
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                </ul>
                                                <div class="score_bar progress">
                                                    <div class="progress-bar" role="progressbar" style="width: calc((100%/3)*1)" aria-valuenow="(100/3)*1" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <div class="ratingP"><p><span>33</span>%</p></div>
                                            </li>
                                            <li>
                                                <ul class="clover_box d-flex justify-content-between gap-3">
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                </ul>
                                                <div class="score_bar progress">
                                                    <div class="progress-bar" role="progressbar" style="width: calc((100%/3)*0)" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <div class="ratingP"><p><span>0</span>%</p></div>
                                            </li>
                                            <li>
                                                <ul class="clover_box d-flex justify-content-between gap-3">
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                    <li>
                                                        <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                    </li>
                                                </ul>
                                                <div class="score_bar progress">
                                                    <div class="progress-bar" role="progressbar" style="width: calc((100%/3)*0)" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                                <div class="ratingP"><p><span>0</span>%</p></div>
                                            </li>
                                        </ul> -->
                                    </div>
                                    <div class="line_space"></div>
                                    <div class="review_tags_area">
                                        <div class="most_tag_box notReviw" th:if="${(rvList == null||rvList == ''||rvCount == 0)}">
                                            <p>
                                                평가된 감성태그가<br>
                                                없습니다
                                            </p>
                                        </div>
                                        <div class="review_total_tag_area"  th:if="${!(rvList == null||rvList == ''||rvCount == 0)}">
                                            <div class="most_tag_box">
                                                <p>
                                                    <span class="most_tag_parcent"></span>의 구매자가<br>
                                                    <span class="most_tag"></span> 라고 응답했어요
                                                </p>
                                            </div>
                                            <div class="review_tags_box">
                                                <div class="" th:each="rvTag : ${rvTags}">
                                                    <p class="tag_percent"><span></span>%</p>
                                                    <div class="score_bar progress" >
                                                        <div class="progress-bar" role="progressbar"   aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="tagName">
                                                        <p th:text="${rvTag.codeName}">최고예요</p>
                                                    </div>
                                                </div>
                                                <!-- <div>
                                                    <div class="score_bar progress">
                                                        <div class="progress-bar" role="progressbar" style="height: calc((100% / 3) * 2); " aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="tagName">
                                                        <p>고마워요</p>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="score_bar progress" >
                                                        <div class="progress-bar" role="progressbar" style="height: calc((100% / 3) * 2); " aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="tagName">
                                                        <p>최고예요</p>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="score_bar progress" >
                                                        <div class="progress-bar" role="progressbar" style="height: calc((100% / 3) * 2); " aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="tagName">
                                                        <p>공감돼요</p>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="score_bar progress" >
                                                        <div class="progress-bar" role="progressbar" style="height: calc((100% / 3) * 2); " aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="tagName">
                                                        <p>재밌어요</p>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="score_bar progress" >
                                                        <div class="progress-bar" role="progressbar" style="height: calc((100% / 3) * 2); " aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="tagName">
                                                        <p>힐링돼요</p>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="review_list_box">
                                <div class="review_tab_box">
                                    <div>

                                    </div>
                                    <div class="sort_box">
                                        <select class="form-select">
                                            <option value="1">최신순</option>
                                            <option value="2">점수순</option>
                                            <option value="3">좋아요순</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="review_list" id="review_list" th:fragment="rvList">
                                    <input type="hidden" name="thisPage" th:value="${vo.thisPage}" default="1"/>
                                    <ul>
                                        <li class="notReview" th:if="${(rvList == null||rvList == ''||rvCount == 0)}">
                                            <p>작성된 리뷰가 없습니다.</p>
                                        </li>
                                        <li class="user_review_box" th:each="rvList : ${rvList}" th:if="${!(rvList == null||rvList == ''||rvCount == 0)}">
                                            <input type="hidden" class="rvSeq" name="rvSeq" th:value="${rvList.rvSeq}">
                                            <div class="review_head">
                                                <div>
                                                    <div>
                                                        <span class="user_id" th:text="${rvList.rvName}">jnbiuabiy23</span>
                                                        <span class="">|</span>
                                                        <span class="day" th:text="${#dates.format(rvList.rvRegDate, 'yyyy.MM.dd')}">2024.08.01</span>
                                                        <span th:if="${rvList.member_seq == session.sessSeqXdm}" class="review_delbtn">삭제</span>
                                                    </div>
                                                    
                                                </div>
                                                
                                                <div>
                                                    <ul class="clover_box d-flex justify-content-between">
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                    </ul>
                                                    <p class="user_review_num" th:text="${rvList.rvScore}"></p>
                                                    <input type="hidden" class="rvSelectTag" name="rvSelectTag" th:value="${rvList.rvSelectTag}">
                                                    <p class="user_select_tag" th:text="${rvList.rvSelectTagName}"></p>
                                                </div>
                                            </div>
                                            <div class="review_body">
                                                <div class="review_content" th:text="${rvList.rvContent}">
                                                </div>
                                                <div class="review_footer">
                                                    <div class="review_footer_etc">
                                                        <div class="btn_like"><span>0</span></div>
                                                        <div class="btn_reply">답글<span class="reply_num">0</span></div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </li>
                                        <!-- <li>
                                            <div class="review_head">
                                                <div>
                                                    <span class="user_id">hong1234</span>
                                                    <span class="line_space">|</span>
                                                    <span class="day">2024.08.01</span>
                                                </div>
                                                <div>
                                                    <ul class="clover_box d-flex justify-content-between">
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                    </ul>
                                                    <p class="user_review_num">10</p>
                                                    <p class="user_select_tag">최고에요</p>
                                                </div>
                                            </div>
                                            <div class="review_content">
                                                진짜 너무 재밌어요..
                                            </div>
                                            <div class="review_footer">
                                                <div class="btn_like"><span>0</span></div>
                                                <div class="btn_reply">답글<span class="reply_num">0</span></div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="review_head">
                                                <div>
                                                    <span class="user_id">kim1234</span>
                                                    <span class="line_space">|</span>
                                                    <span class="day">2024.08.02</span>
                                                </div>
                                                <div>
                                                    <ul class="clover_box d-flex justify-content-between">
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="">
                                                        </li>
                                                        <li>
                                                            <img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt="" style="opacity: 0.3;">
                                                        </li>
                                                    </ul>
                                                    <p class="user_review_num">7.5</p>
                                                    <p class="user_select_tag">재밌어요</p>
                                                </div>
                                            </div>
                                            <div class="review_content">
                                                재밌어요.
                                            </div>
                                            <div class="review_footer">
                                                <div class="btn_like"><span>0</span></div>
                                                <div class="btn_reply">답글<span class="reply_num">0</span></div>
                                            </div>
                                        </li> -->
                                    </ul>
                                    <div class="pagination-container mt-5">
                                        <div class="pagination-wrapper">
                                            <div class="dataTable-bottom">
                                                <nav class="dataTable-pagination" aria-label="dataTable-pagination">
                                                    <ul class="dataTable-pagination-list pagination pagination-primary justify-content-center">
                                                        <li class="paginate_button page-item" th:classappend="${vo.thisPage > 1} ? '' : 'disabled'">
                                                            <a class="page-link" th:attr="onclick=|goList('1')|" href="javascript:goList(1)" th:if="${vo.thisPage > 1}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-angles-left"></i></span>
                                                            </a>
                                                            <a class="page-link" th:if="${vo.thisPage <= 1}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-angles-left"></i></span>
                                                            </a>
                                                        </li>
                                                        <li class="paginate_button previous page-item" id="previousPage" th:classappend="${vo.thisPage > 1} ? '' : 'disabled'">
                                                            <a class="page-link" th:attr="onclick=|goList('${vo.thisPage - 1}')|" href="javascript:goList(${vo.thisPage - 1})" th:if="${vo.thisPage > 1}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-chevron-left"></i></span>
                                                            </a>
                                                            <a class="page-link" th:if="${vo.thisPage <= 1}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-chevron-left"></i></span>
                                                            </a>
                                                        </li>
                                                        <li th:each="i : ${#numbers.sequence(
                                                                            vo.thisPage == 1 ? 1 : 
                                                                            vo.thisPage == 2 ? 1 : 
                                                                            vo.thisPage == vo.totalPages - 1 ? vo.thisPage - 3 : 
                                                                            vo.thisPage == vo.totalPages ? vo.thisPage - 4 : 
                                                                            vo.thisPage - 2, 
                                                                            
                                                                            vo.thisPage == 1 ? 5 : 
                                                                            vo.thisPage == 2 ? 5 : 
                                                                            vo.thisPage == vo.totalPages - 1 ? vo.totalPages : 
                                                                            vo.thisPage == vo.totalPages ? vo.totalPages : 
                                                                            vo.thisPage + 2
                                                                        )}"
                                                            class="paginate_button page-item"
                                                            th:if="${i > 0 && i <= vo.totalPages}" 
                                                            th:classappend="${i == vo.thisPage} ? 'active' : ''">
                                                            <a class="page-link" th:attr="onclick=|goList('${i}')|" th:text="${i}"></a>
                                                        </li>
                                                        <li class="paginate_button next page-item" id="nextPage" th:classappend="${vo.thisPage < vo.totalPages} ? '' : 'disabled'">
                                                            <a class="page-link" th:attr="onclick=|goList('${vo.thisPage + 1}')|" href="javascript:goList(${vo.thisPage + 1})" th:if="${vo.thisPage < vo.totalPages}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-chevron-right"></i></span>
                                                            </a>
                                                            <a class="page-link" th:if="${vo.thisPage >= vo.totalPages}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-chevron-right"></i></span>
                                                            </a>
                                                        </li>
                                                        <li class="paginate_button page-item" th:classappend="${vo.thisPage < vo.totalPages} ? '' : 'disabled'">
                                                            <a class="page-link" th:attr="onclick=|goList('${vo.totalPages}')|" href="javascript:goList(${vo.totalPages})" th:if="${vo.thisPage < vo.totalPages}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-angles-right"></i></span>
                                                            </a>
                                                            <a class="page-link" th:if="${vo.thisPage >= vo.totalPages}">
                                                                <span aria-hidden="true"><i class="fa-solid fa-angles-right"></i></span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </nav>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="review_write_box d-flex flex-column gap-4 align-items-strat">
                                <p class="box_title">리뷰작성</p>
                                <form action="">
                                    <div class="user_select_tags_box">
                                        <p class="box_title">감성 태그</p>
                                        <p class="mb-5">가장 와 닿는 하나의 키워드를 선택해주세요.</p>
                                        <ul class="user_select_tags d-flex justify-content-between mt-3">
                                            <li th:each="tags:${rvTags}">
                                                <input type="radio" name="rvSelectTag" th:id="'select_tag' + ${tagsStat.count}" th:value="${tags.seq}">
                                                <label th:for="'select_tag' +${tagsStat.count}" th:text="${tags.codeName}">고마워요</label>
                                            </li>
                                        </ul>
                                        <!-- <input type="text"> -->
                                    </div>
                                    <div class="review_text_box">
                                        <p class="box_title">리뷰 작성</p>
                                        <div class="review_head d-flex align-items-center gap-4 ">
                                            <div class="user_rating_star_box">
                                                <strong class="rating_prod_title" th:text="${product.title}"></strong>
                                                <div class="user_rating_star">
                                                    <input id="rating-input" class="custom-star" value="0" />
                                                </div>
                                                <input type="hidden" id="rvUsrScore" name="rvScore" value="0" />
                                            </div>
                                        </div>
                                        <textarea name="rvContent" class="form-control" id="rvContent" rows="3" placeholder="내용을 50자 이상 입력해 주세요. 주제와 무관한 댓글, 악플, 배송문의 등의 글은 임의 삭제될 수 있습니다."></textarea>
                                    </div>
                                </form>
                                <div class="review_btn_box d-flex gap-2 align-items-center justify-content-end">
                                    <button id="rvBtn" type="button" class="btn btn-blue">리뷰작성</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="prod_detail_recommend">
                        <div class="best_in_category">
                            <div class="d-flex justify-content-between">
                                <p class="box_title"><b>이 분야의 베스트</b></p>
                                <a href="javascript:void(0);">더보기 ></a>
                            </div>
                            <ul class="d-flex flex-column gap-3 mt-4">
                                <li>
                                    <div class="img-box">
                                        <img src="/usr/v1/assets/images/prod/200/9791170611561.jpg" alt="">
                                    </div>
                                    <div class="textArea">
                                        <span>1</span>
                                        <p class="prod_title"><strong>당신이 누군가를 죽였다</strong></p>
                                        <p class="prod_author">히가시노 게이고</p>
                                        <p class="prod_price">
                                            <strong class="saleP">10%</strong>
                                            <span class="sale_price">
                                                <strong>17,820</strong>원
                                            </span>
                                        </p>            
                                    </div>
                                </li>
                                <li>
                                    <div class="img-box">
                                        <img src="/usr/v1/assets/images/prod/200/9788998441012.jpg" alt="">
                                    </div>
                                    <div class="textArea">
                                        <span>2</span>
                                        <p class="prod_title"><strong>모순</strong></p>
                                        <p class="prod_author">양귀자</p>
                                        <p class="prod_price">
                                            <strong class="saleP">10%</strong>
                                            <span class="sale_price">
                                                <strong>11,700</strong>원
                                            </span>
                                        </p>            
                                    </div>
                                </li>
                                <li>
                                    <div class="img-box">
                                        <img src="/usr/v1/assets/images/prod/200/9788954681155.jpg" alt="">
                                    </div>
                                    <div class="textArea">
                                        <span>3</span>
                                        <p class="prod_title"> <strong>홍학의 자리</strong></p>
                                        <p class="prod_author">정해연</p>
                                        <p class="prod_price">
                                            <strong class="saleP">10%</strong>
                                            <span class="sale_price">
                                                <strong>12,600</strong>원
                                            </span>
                                        </p>            
                                    </div>
                                </li>
                                <li>
                                    <div class="img-box">
                                        <img src="/usr/v1/assets/images/prod/200/9788952776372.jpg" alt="">
                                    </div>
                                    <div class="textArea">
                                        <span>4</span>
                                        <p class="prod_title"><strong>리틀 라이프 1</strong></p>
                                        <p class="prod_author">한야 야나기하라</p>
                                        <p class="prod_price">
                                            <strong class="saleP">10%</strong>
                                            <span class="sale_price">
                                                <strong>13,320</strong>원
                                            </span>
                                        </p>            
                                    </div>
                                </li>
                                <li>
                                    <div class="img-box">
                                        <img src="/usr/v1/assets/images/prod/200/9791167902573.jpg" alt="">
                                    </div>
                                    <div class="textArea">
                                        <span>5</span>
                                        <p class="prod_title"><strong>마녀와의 7일</strong></p>
                                        <p class="prod_author">히가시노 게이고</p>
                                        <p class="prod_price">
                                            <strong class="saleP">10%</strong>
                                            <span class="sale_price">
                                                <strong>16,920</strong>원
                                            </span>
                                        </p>            
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <div class="top_btn"><i class="fa-solid fa-xl fa-chevron-up"></i></div>
        <div th:replace="~{usr/v1/infra/include/footer :: footer}"></div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- another JS -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script src="/usr/v1/assets/js/rating.js"></script>
    <script src="/usr/v1/assets/js/custom.js"></script>
    <script src="/usr/v1/assets/js/review.js"></script>
    <script>
        window.onload = function() {
            goList = function (thisPage) {
                console.log("값: "+thisPage);
                document.querySelector("input[name=thisPage]").value = thisPage;
                const urlParams = new URLSearchParams(window.location.search);
                const seq = urlParams.get('seq');
                console.log("thisPage값: "+document.querySelector("input[name=thisPage]").value);

                // const sessSeqXdm = /*[[${session.sessSeqXdm}]]*/ '';
                const sessSeqXdm  = $("#userSeq").val();
                console.log("sessSeqXdm1:",sessSeqXdm);
                // const page = $(this).data('page'); // 클릭한 페이지 번호
                $.ajax({
                    url: '/reviewList', // 서버의 페이지네이션 엔드포인트
                    type: 'post',
                    contentType: 'application/json', // JSON 형식으로 데이터 전송
                    data: JSON.stringify({ thisPage: thisPage ,seq:seq}),
                    success: function(response) {
                        console.log("sessSeqXdm2:",sessSeqXdm);
                        $('#review_list>ul').empty(); // 기존 리뷰 리스트 비우기
                        $.each(response.rvList, function(index, review) {
                            console.log("review.member_seq:",review.member_seq);
                            var deleteButton = (review.member_seq == sessSeqXdm) ? 
                            `<span class="review_delbtn">삭제</span>` : '';
                            // 리뷰 아이템 생성
                            var reviewItem = `
                            <li class="user_review_box">
                                <input type="hidden" class="rvSeq" name="rvSeq" value="${review.rvSeq}">
                                <div class="review_head">
                                    <div>
                                        <div>
                                            <span class="user_id">${review.rvName}</span>
                                            <span class="line_space">|</span>
                                            <span class="day">${new Date(review.rvRegDate).toLocaleDateString()}</span>
                                            ${deleteButton}    <!-- 로그인한 사용자일 때만 삭제 버튼 표시 -->
                                        </div>
                                    </div>
                                    <div>
                                        <ul class="clover_box d-flex justify-content-between">
                                            ${'<li><img src="/usr/v1/assets/images/ico_klover_sm@2x.png" alt=""></li>'.repeat(4)}
                                        </ul>
                                        <p class="user_review_num">${review.rvScore}</p>
                                        <input type="hidden" class="rvSelectTag" name="rvSelectTag" value="${review.rvSelectTag}">
                                        <p class="user_select_tag">${review.rvSelectTagName}</p>
                                    </div>
                                </div>
                                <div class="review_body">
                                    <div class="review_content">${review.rvContent}</div>
                                    <div class="review_footer">
                                        <div class="review_footer_etc">
                                            <div class="btn_like"><span>0</span></div>
                                            <div class="btn_reply">답글<span class="reply_num">0</span></div>
                                        </div>
                                    </div>
                                </div>
                            </li>`;
                            $('#review_list>ul').append(reviewItem);
                        });
                        // 페이징 정보 업데이트
                        // document.querySelector("input[name=thisPage]").value = response.thisPage;
                        updatePagination(response.thisPage, response.totalPages);
                        const reviews = document.querySelectorAll(".user_review_box");
                        rvCloverImg(reviews);
                        rvdelete();
                    },
                    error: function() {
                        alert('데이터를 불러오는 데 오류가 발생했습니다.');
                    }
                });
            }
            
        }
        function buyProduct(button) {
            const quantity = document.getElementById('uoQuantity').value;
            const seq = button.getAttribute('data-seq');
            location.href = `/product_buy?seq=${seq}&uoQuantity=${quantity}`;
        }
    </script>
</body>
</html>