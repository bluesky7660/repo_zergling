<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="/usr/v1/assets/css/bootstrap.min.css" /> -->
    <!-- <link rel="shortcut icon" href="/usr/v1/assets/images/favicon/favicon_256x256.png"> -->
    <link rel="icon" type="image/png" sizes="256x256" href="/usr/v1/assets/images/favicon/favicon_256x256.png">
    
    <link rel="stylesheet" href="/usr/v1/assets/css/reset.css">
    
    <!-- <link rel="stylesheet" href="/usr/v1/assets/css/style.css"> -->
    <link rel="stylesheet" href="/usr/v1/assets/css/tiny-slider.css">
    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- nouislider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.8.1/nouislider.min.js" integrity="sha512-g/feAizmeiVKSwvfW0Xk3ZHZqv5Zs8PEXEBKzL15pM0SevEvoX8eJ4yFWbqakvRj7vtw1Q97bLzEpG2IVWX0Mg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/usr/v1/assets/js/nouislider.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.8.1/nouislider.css" integrity="sha512-MKxcSu/LDtbIYHBNAWUQwfB3iVoG9xeMCm32QV5hZ/9lFaQZJVaXfz9aFa0IZExWzCpm7OWvp9zq9gVip/nLMg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/usr/v1/assets/css/nouislider.min.css">
    <!-- another-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/css/bootstrap-select.min.css" integrity="sha256-wiMI7buOV5UBzdWN4s4kXqE/LZ794hx5oJOOIQlDBaM=" crossorigin="anonymous">
    
    <!-- slick -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>

    <!-- swiper -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="/usr/v1/assets/css/style.css">
    <link rel="stylesheet" href="/usr/v1/assets/css/product_list.css">
    <link rel="stylesheet" href="/usr/v1/assets/css/book_review_video_list.css">
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

</head>
<body>
    <div class="page-wrapper">
        <div th:replace="~{usr/v1/infra/include/head :: header}"></div>
        <main>
            <!-- <div class="breadcrumb_wrapper">
                <ol class="breadcrumb d-md-flex d-none">
                    <li class="breadcrumb-item">
                        <i class="bi bi-house"></i>
                        <a href="index">Home</a>
                    </li>
                    <li class="breadcrumb-item">국내도서</li>
                    <li class="breadcrumb-item">소설</li>
                    <li class="breadcrumb-item">한국소설</li>
                    <li class="breadcrumb-item breadcrumb-active" aria-current="page">전체</li>
                </ol>
            </div> -->
            <div class="content_wrapper">
                <div class="header_box">
                    <h3>Youtube API [도서서평]</h3>
                </div>
                <form id="listForm" name="listForm" autocomplete="off" method="post" action="book_review_video_list">
                    <input type="hidden" name="searchKeyword" th:value="${shVo.searchKeyword}"/>
                    <input type="hidden" name="thisPage" th:value="${vo.thisPage}" default="1"/>
                    <input type="hidden" id="rowNumToShow" name="rowNumToShow" th:value="${vo.rowNumToShow}"/>
                    
                    <div class="contentArea">
                        <div class="contents">
                            
                            <div id="channels_area" class="channels_area">
                                <div class="channels_tab_area">
                                    <ul id="channel-tabs" class="channel-tabs"></ul>
                                </div>
                                <div class="channels_box">
                                    <div class="spinner" id="loadingSpinner"></div>
                                    <div class="channel_info" id="channel_info">
                                        <a href="http://" target="_blank" rel="noopener noreferrer" id="channel_link">
                                            <div class="channel_thumbnail_box" id="channel_thumbnail_box">
                                                <img id="channel_thumbnail" src="" alt="channelsImage">
                                            </div>
                                            <div class="channel_info_text" id="channel_info_text">
                                                <h3 class="channel_Name" id="channel_Name"></h3>
                                                <p class="channel_subscribersCount" id="channel_subscribersCount"></p>
                                                <p class="channel_videosCount" id="channel_videosCount"></p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="channels_video_list">
                                        <ul id="video-list"></ul>
                                        <!-- <div class="channels_video">
                                            <a href="${item.videoUrl}" target="_blank">
                                                <div class="video_thumbnail">
                                                    <div class="img_box">
                                                        <img src="${item.thumbnailUrl}" alt="${item.title}">
                                                    </div>
                                                </div>
                                                <div class="video_detail">
                                                    <h4>${item.title}</h4>
                                                    <p>조회수: ${item.viewCount}회</p>
                                                    <p>좋아요: ${item.likeCount}</p>
                                                    <p>댓글 수: ${item.commentCount}</p>
                                                </div>
                                            </a>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </main>
        <div class="top_btn"><i class="fa-solid fa-xl fa-chevron-up"></i></div>
        <div th:replace="~{usr/v1/infra/include/footer :: footer}"></div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Bootstrap Select JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta3/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script src="/usr/v1/assets/js/custom.js"></script>
    <script src="/usr/v1/assets/js/header.js"></script>
    <script src="/usr/v1/assets/js/video.js"></script>
    <script>
        $(document).ready(function() {
            
            // 채널 목록 가져오기
            $.ajax({
                url: '/channels',
                method: 'GET',
                success: function(channels) {
                    let tabsHtml = '';
                    channels.forEach(function(channel, index) {
                        // 각 채널 탭 생성
                        tabsHtml += '<li><a href="#" class="channel-tab" data-channel-id="' + channel.ycId + '">' + channel.ycName + '</a></li>';
                    });
                    $('#channel-tabs').html(tabsHtml);

                    console.log("channels:",channels);
                    // 첫 번째 채널의 기본 정보 및 동영상 표시
                    if (channels.length > 0) {
                        $('#loadingSpinner').show();
                        loadChannelDetails(channels[0].ycId);
                    }

                    // 탭 클릭 이벤트 처리
                    $('.channel-tab').click(function(e) {
                        console.log("클릭");
                        e.preventDefault();
                        let ycId = $(this).data('channel-id');
                        
                        loadChannelDetails(ycId);
                    });
                }
            }); 
        })
    </script>
</body>
</html>